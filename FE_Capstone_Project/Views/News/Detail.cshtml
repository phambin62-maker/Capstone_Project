@model FE_Capstone_Project.Models.NewsViewModel
@{
    ViewData["Title"] = Model?.Title ?? "News details";
    Layout = "~/Views/Shared/_Layout.cshtml";

    TimeZoneInfo vietnamZone = TimeZoneInfo.FindSystemTimeZoneById("SE Asia Standard Time");
    DateTime createdDateLocal = Model.CreatedDate.HasValue ? TimeZoneInfo.ConvertTimeFromUtc(Model.CreatedDate.Value, vietnamZone) : DateTime.MinValue;

    string fallbackImageUrl = "/assets/img/blog/blog-hero-1.webp";
    string finalImageUrl = string.IsNullOrEmpty(Model.Image) ? fallbackImageUrl : Model.Image;
}

<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">

            <div class="text-center mb-4">
                <span class="badge bg-primary-subtle text-primary px-3 py-2 rounded-pill mb-3 text-uppercase fw-bold" style="font-size: 0.75rem; letter-spacing: 1px;">News Article</span>

                <h1 class="display-5 fw-bold text-dark mb-3">@Model.Title</h1>

                <div class="d-flex justify-content-center align-items-center text-muted gap-3">
                    <div class="d-flex align-items-center">
                        <i class="bi bi-person-circle me-2 fs-5"></i>
                        <span class="fw-medium">@Model.AuthorName</span>
                    </div>
                    <span class="text-black-50">|</span>
                    <div class="d-flex align-items-center">
                        <i class="bi bi-calendar-event me-2 fs-5"></i>
                        <span>@createdDateLocal.ToString("dd/MM/yyyy HH:mm")</span>
                    </div>
                </div>
            </div>

            @if (!string.IsNullOrEmpty(finalImageUrl))
            {
                <div class="mb-5 shadow-lg rounded-4 overflow-hidden position-relative">
                    <img src="@finalImageUrl"
                         alt="@Model.Title"
                         class="img-fluid w-100 d-block"
                         style="max-height: 600px; object-fit: cover;"
                         onerror="this.src='/assets/img/blog/blog-hero-1.webp'" />
                </div>
            }

            <div class="article-content px-md-4">
                @Html.Raw(Model.Content)
            </div>

            <hr class="my-5 text-muted opacity-25">

            <div class="d-flex justify-content-between align-items-center">
                <a href="@Url.Action("Index", "News")" class="btn btn-outline-dark rounded-pill px-4 hover-lift">
                    <i class="bi bi-arrow-left me-2"></i> Back to News
                </a>

                <div class="d-flex gap-2">
                    <button class="btn btn-light rounded-circle shadow-sm" title="Share on Facebook"><i class="bi bi-facebook text-primary"></i></button>
                    <button class="btn btn-light rounded-circle shadow-sm" title="Copy Link"><i class="bi bi-link-45deg"></i></button>
                </div>
            </div>

        </div>
    </div>
</div>

@section Styles {
    <style>
        .article-content {
            font-size: 1.15rem;
            line-height: 1.8;
            color: #2c3e50;
            text-align: justify;
        }

            .article-content p {
                margin-bottom: 1.5rem;
            }

            .article-content h2 {
                font-weight: 700;
                margin-top: 2.5rem;
                margin-bottom: 1rem;
                color: #111;
            }

            .article-content h3 {
                font-weight: 600;
                margin-top: 2rem;
                color: #333;
            }

            .article-content img {
                max-width: 100% !important;
                height: auto !important;
                border-radius: 12px;
                margin: 2rem 0;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
                display: block;
                margin-left: auto;
                margin-right: auto;
            }

            .article-content blockquote {
                border-left: 5px solid #0d6efd;
                padding-left: 1.5rem;
                margin: 2rem 0;
                font-style: italic;
                color: #555;
                background: #f8f9fa;
                padding: 1.5rem;
                border-radius: 0 8px 8px 0;
            }

        .hover-lift {
            transition: transform 0.2s;
        }

            .hover-lift:hover {
                transform: translateY(-3px);
            }
    </style>
}