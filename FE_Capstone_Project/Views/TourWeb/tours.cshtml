@model List<TourViewModel>
<body class="tours-page">
    <main class="main">
        <!-- Page Title -->
        <div class="page-title dark-background" data-aos="fade" style="background-image: url(~/assets/img/travel/showcase-8.webp);">
            <div class="container position-relative">
                <h1>Tours</h1>
                <p>Discover our carefully curated tours across Vietnam. From vibrant cities to breathtaking natural landscapes — find your perfect adventure today.</p>
                <nav class="breadcrumbs">
                    <ol>
                        <li><a asp-controller="Home" asp-action="Index">Home</a></li>
                        <li class="current">Tours</li>
                    </ol>
                </nav>
            </div>
        </div><!-- End Page Title -->
        <!-- Travel Tours Section -->
        <section id="travel-tours" class="travel-tours section">

            <div class="container" data-aos="fade-up" data-aos-delay="100">

                <div class="row">
                    <div class="col-lg-8 mx-auto text-center mb-5">
                        <h2>Find Your Perfect Tour</h2>
                        <p>Discover unforgettable travel experiences with our curated collection of tours. Explore by destination, travel style, or date to find the adventure that's perfect for you.</p>
                    </div>
                </div>

                <!-- Tour Filters -->
                <div class="row mb-5" data-aos="fade-up" data-aos-delay="200">
                    <div class="col-12">
                        <div class="tour-filters">
                            <div class="row">
                                <div class="col-lg-3 col-md-6 mb-3">
                                    <select class="form-select">
                                        <option value="">Select Destination</option>
                                        <option value="paris">Paris</option>
                                        <option value="bali">Bali</option>
                                        <option value="tokyo">Tokyo</option>
                                        <option value="rome">Rome</option>
                                        <option value="thailand">Thailand</option>
                                    </select>
                                </div>
                                <div class="col-lg-3 col-md-6 mb-3">
                                    <select class="form-select">
                                        <option value="">Tour Type</option>
                                        <option value="adventure">Adventure</option>
                                        <option value="luxury">Luxury</option>
                                        <option value="family">Family</option>
                                        <option value="cultural">Cultural</option>
                                        <option value="beach">Beach</option>
                                    </select>
                                </div>
                                <div class="col-lg-3 col-md-6 mb-3">
                                    <select class="form-select">
                                        <option value="">Duration</option>
                                        <option value="1-3">1-3 Days</option>
                                        <option value="4-7">4-7 Days</option>
                                        <option value="8-14">8-14 Days</option>
                                        <option value="15+">15+ Days</option>
                                    </select>
                                </div>
                                <div class="col-lg-3 col-md-6 mb-3">
                                    <select class="form-select">
                                        <option value="">Price Range</option>
                                        <option value="0-500">$0 - $500</option>
                                        <option value="500-1000">$500 - $1,000</option>
                                        <option value="1000-2000">$1,000 - $2,000</option>
                                        <option value="2000+">$2,000+</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Featured Tours Slider -->
                <div class="row mb-5" data-aos="fade-up" data-aos-delay="300">
                    <div class="col-12">
                        <h3 class="section-subtitle mb-4">Featured Tours</h3>
                        <div class="featured-tours-slider swiper init-swiper">
                            <script type="application/json" class="swiper-config">
                                {
                                  "loop": true,
                                  "speed": 600,
                                  "autoplay": {
                                    "delay": 5000
                                  },
                                  "slidesPerView": 1,
                                  "spaceBetween": 30,
                                  "pagination": {
                                    "el": ".swiper-pagination",
                                    "type": "bullets",
                                    "clickable": true
                                  },
                                  "breakpoints": {
                                    "768": {
                                      "slidesPerView": 2
                                    },
                                    "1200": {
                                      "slidesPerView": 3
                                    }
                                  }
                                }
                            </script>
                            <div class="swiper-wrapper">
                                @foreach (TourViewModel featuredTour in ViewBag.FeaturedTours)
                                {
                                    <div class="swiper-slide">
                                        <div class="featured-tour-card">
                                            <div class="tour-image">
                                                <img src="@featuredTour.TourImages.First().Image" class="img-fluid">
                                                <div class="tour-badge">@featuredTour.Category.CategoryName</div>
                                            </div>
                                            <div class="tour-content">
                                                <h4>@featuredTour.Name</h4>
                                                <p>@featuredTour.Description</p>
                                                <div class="tour-meta">
                                                    <span class="duration"><i class="bi bi-clock"></i> @featuredTour.Duration Day@(featuredTour.Duration == 1 ? "" : "s")</span>
                                                    <span class="price">From @string.Format("{0:N0} VND", featuredTour.Price)</span>
                                                </div>
                                                <a asp-action="TourDetails" asp-route-tourId="@featuredTour.Id" class="btn btn-primary">View Details</a>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>
                            <div class="swiper-pagination"></div>
                        </div>
                    </div>
                </div>

                <!-- Tour Grid -->
                <div class="row" data-aos="fade-up" data-aos-delay="600">
                    <div class="col-12">
                        <h3 class="section-subtitle mb-4">All Tours</h3>
                        <div class="row">
                            @foreach (var tour in Model)
                            {
                                string avgRatingText = "N/A";

                                if (tour.Reviews != null && tour.Reviews.Any())
                                {
                                    decimal avgRating = (decimal)tour.Reviews.Average(r => r.Stars);
                                    avgRatingText = avgRating.ToString("0.0");
                                }

                                <div class="col-lg-4 col-md-6 mb-4">
                                    <div class="tour-card">
                                        <div class="tour-image">
                                            <img src="@tour.TourImages.First().Image" class="img-fluid">
                                            <div class="tour-price">@string.Format("{0:N0} VND", tour.Price)</div>
                                        </div>
                                        <div class="tour-content">
                                            <h4>@tour.Name</h4>
                                            <p>@tour.Description</p>
                                            <div class="tour-details">
                                                <span><i class="bi bi-clock"></i> @tour.Duration Day@(tour.Duration == 1 ? "" : "s")</span>
                                                <span><i class="bi bi-star-fill"></i> @avgRatingText (@tour.Reviews.Count reviews)</span>
                                            </div>
                                            <a asp-action="TourDetails" asp-route-tourId="@tour.Id" class="btn btn-outline-primary">View Tour</a>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>

                <!-- CTA Section -->
                <div class="row" data-aos="fade-up" data-aos-delay="700">
                    <div class="col-12">
                        <div class="cta-section text-center">
                            <h3>Not Sure What to Choose?</h3>
                            <p>Our travel experts are here to help you find the perfect tour based on your preferences and budget.</p>
                            <div class="cta-buttons">
                                <a href="#" class="btn btn-primary me-3">Contact Our Experts</a>
                                <a href="#" class="btn btn-outline-primary">Take Our Travel Quiz</a>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </section><!-- /Travel Tours Section -->

    </main>

    <!-- Scroll Top -->
    <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

    <!-- Preloader -->
    <div id="preloader"></div>

    <!-- Vendor JS Files -->
    <script src="~/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/vendor/php-email-form/validate.js"></script>
    <script src="~/assets/vendor/aos/aos.js"></script>
    <script src="~/assets/vendor/purecounter/purecounter_vanilla.js"></script>
    <script src="~/assets/vendor/swiper/swiper-bundle.min.js"></script>
    <script src="~/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="~/assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
    <script src="~/assets/vendor/glightbox/js/glightbox.min.js"></script>

    <!-- Main JS File -->
    <script src="~/assets/js/main.js"></script>

</body>